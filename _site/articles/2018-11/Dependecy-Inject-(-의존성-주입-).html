<!DOCTYPE html>
<html lang="en">





<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Dependecy Injection ( 의존성 주입 )Dependect Injection ( DI) 의존성 주입은 스프링의 특징이자 장점중 하나이며 구성요소간 의존 관계가 소스코드 내부에 아닌 외부 설정파일 등을 통해서 정의되는 디자인 패턴중에 하나이다.의존성 주입을 함으로써 얻게...">
  <meta name="keywords" content="민동현 and spring">
  <meta name="author" content="DI | 민동현의 블로그">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#f5f5f5">

  <!-- Twitter Tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="DI | 민동현의 블로그">
  <meta name="twitter:description" content="Dependecy Injection ( 의존성 주입 )Dependect Injection ( DI) 의존성 주입은 스프링의 특징이자 장점중 하나이며 구성요소간 의존 관계가 소스코드 내부에 아닌 외부 설정파일 등을 통해서 정의되는 디자인 패턴중에 하나이다.의존성 주입을 함으로써 얻게...">
  
    <meta property="twitter:image" content="http://localhost:4000/img/leonids-logo.png">
  

  <!-- Open Graph Tags -->
  <meta property="og:type" content="blog">
  <meta property="og:url" content="http://localhost:4000/articles/2018-11/Dependecy-Inject-(-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85-)">
  <meta property="og:title" content="DI | 민동현의 블로그">
  <meta property="og:description" content="Dependecy Injection ( 의존성 주입 )Dependect Injection ( DI) 의존성 주입은 스프링의 특징이자 장점중 하나이며 구성요소간 의존 관계가 소스코드 내부에 아닌 외부 설정파일 등을 통해서 정의되는 디자인 패턴중에 하나이다.의존성 주입을 함으로써 얻게...">
  
    <meta property="og:image" content="http://localhost:4000/img/leonids-logo.png">
  
  <title>DI | 민동현의 블로그</title>

  <!-- CSS files -->
  <link rel="stylesheet" href="http://localhost:4000/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://localhost:4000/css/main.css">

  <link rel="canonical" href="http://localhost:4000/articles/2018-11/Dependecy-Inject-(-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85-)">
  <link rel="alternate" type="application/rss+xml" title="민동현의 블로그" href="http://localhost:4000/feed.xml" />

  <!-- Icons -->
  <!-- 16x16 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
  <!-- 32x32 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.png">
</head>


<body>
  <div class="row">
    <div class="col s12 m3">
      <div class="table cover">
        

<div class="cover-card table-cell table-middle">
  
  <a href="http://localhost:4000/">
    <img src="http://localhost:4000/img/profile.jpg" alt="" class="avatar">
  </a>
  
  <a href="http://localhost:4000/" class="author_name">민동현</a>
  <span class="author_job">Back End Developer</span>
  <span class="author_bio mbm">JAVA 개발자</span>
  <nav class="nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a href="http://localhost:4000/">home</a>
      </li>
       
      <li class="nav-item">
        <a href="http://localhost:4000/archive/">Archive</a>
      </li>
          
      <li class="nav-item">
        <a href="http://localhost:4000/categories/">Categories</a>
      </li>
             
    </ul>
  </nav>
  <script type="text/javascript">
  // based on http://stackoverflow.com/a/10300743/280842
  function gen_mail_to_link(hs, subject) {
    var lhs,rhs;
    var p = hs.split('@');
    lhs = p[0];
    rhs = p[1];
    document.write("<a class=\"social-link-item\" target=\"_blank\" href=\"mailto");
    document.write(":" + lhs + "@");
    document.write(rhs + "?subject=" + subject + "\"><i class=\"fa fa-fw fa-envelope\"></i><\/a>");
  }
</script>
<div class="social-links">
  <ul>
    
      <li>
      <script>gen_mail_to_link('mindh890@gmail.com', 'Hello from website');</script>
      </li>
    
    
    
    
    <li><a href="http://linkedin.com/in/동현-민-736913183" class="social-link-item" target="_blank"><i class="fa fa-fw fa-linkedin"></i></a></li>
    
    
    
    
    <li><a href="http://github.com/DaeAkin" class="social-link-item" target="_blank"><i class="fa fa-fw fa-github"></i></a></li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <li><a href="https://t.me/DonghyeonMin" class="social-link-item" target="_blank"><i class="fa fa-fw fa-telegram"></i></a></li>
  </ul>
</div>

</div>

      </div>
    </div>
    <div class="col s12 m9">
      <div class="post-listing">
        <a class="btn" href= "http://localhost:4000/" >
  Home
</a>



<div id="post">
  <header class="post-header">
    <h1 title="DI">DI</h1>
    <span class="post-meta">
      <span class="post-date">
        4 NOV 2018
      </span>
      •
      <span class="read-time" title="Estimated read time">
  
  
    5 mins read
  
</span>

    </span>

  </header>

  <article class="post-content">
    <h1 id="dependecy-injection--의존성-주입-">Dependecy Injection ( 의존성 주입 )</h1>

<p>Dependect Injection ( DI) 의존성 주입은 스프링의 특징이자 장점중 하나이며 구성요소간 의존 관계가 소스코드 내부에 아닌 외부 설정파일 등을 통해서 정의되는 디자인 패턴중에 하나이다.</p>

<p>의존성 주입을 함으로써 얻게되는 이점은 의존 관계 설정이 컴파일시 아닌 실행시에 이루어져 모듈간의 결합도를 낮출수 있고, 코드의 재사용을 높이고 소스코드들이 한 곳에 모여 있어 유지보수에 편리하다는 장점이 있다.</p>

<h2 id="di설정하기">DI설정하기</h2>

<p>일단 먼저 사용할 패키지를 생성해보겠다.</p>

<p>필자는 com.donghyeon.blog.dipratice를 만들었다.</p>

<p><a href="https://4.bp.blogspot.com/-e6Av_POj9d8/W95ZbCwg5rI/AAAAAAAABAo/Oaio-E90f_g80Qnlt4cPlYumiS5kAtnaACEwYBhgL/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2018-11-04%2B%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2B11.28.48.png"><img src="https://4.bp.blogspot.com/-e6Av_POj9d8/W95ZbCwg5rI/AAAAAAAABAo/Oaio-E90f_g80Qnlt4cPlYumiS5kAtnaACEwYBhgL/s1600/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2018-11-04%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%2B11.28.48.png" alt="img" /></a></p>

<p>여기에 DI를 위한 XML 파일을 하나 만들어보겠다.</p>

<p>이름은 <code class="language-plaintext highlighter-rouge">DI-context.xml</code>로 만들겠다.</p>

<p>테스트를 위해 SayHello 를 만들어보자</p>

<blockquote>
  <h4 id="sayhellojava">SayHello.java</h4>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">donghyeon</span><span class="o">.</span><span class="na">blog</span><span class="o">.</span><span class="na">dipractice</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SayHello</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">hello</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setHello</span><span class="o">(</span><span class="nc">String</span> <span class="n">hello</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">hello</span> <span class="o">=</span> <span class="n">hello</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayHello</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">hello</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>필드로 String인 hello 변수가 선언되어있고,</p>

<p>hello의 값을 설정해주는 setHello() 함수가 있고,</p>

<p>hello 변수의 값을 콘솔로 찍어주는 sayHello() 함수가 있다.</p>

<p>우리가 해볼 것은 hello의 변수에 <u>직접적으로 값을 주지 않고</u> xml 파일로 값을 주입해볼 것이다.</p>

<p>Main 함수를 만들어 테스트 해보겠다.</p>

<blockquote>
  <h4 id="dimainjava">DIMain.java</h4>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">donghyeon</span><span class="o">.</span><span class="na">blog</span><span class="o">.</span><span class="na">dipractice</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DIMain</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">SayHello</span> <span class="n">hello</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SayHello</span><span class="o">();</span>
        <span class="n">hello</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="output">Output</h3>

<p><a href="https://1.bp.blogspot.com/-b_XejLEL6ac/W95bEA6wqqI/AAAAAAAABAw/DE-pPp7SodIil4bXZCpdzXrASTuN1imKwCLcBGAs/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2018-11-04%2B%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2B11.35.52.png"><img src="https://1.bp.blogspot.com/-b_XejLEL6ac/W95bEA6wqqI/AAAAAAAABAw/DE-pPp7SodIil4bXZCpdzXrASTuN1imKwCLcBGAs/s1600/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2018-11-04%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%2B11.35.52.png" alt="img" /></a></p>

<p><u>null이 나오는 이유</u>는 아직 SayHello 클래스에 있는 hello 변수가 선언만 되어있고,</p>

<p>값이 초기화 되어있지 않기 때문이다.</p>

<p>이 초기화를 DI-context.xml을 통해서 해보겠다.</p>

<blockquote>
  <h4 id="di-contextxml">DI-context.xml</h4>
</blockquote>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
        <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
        <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"</span><span class="nt">&gt;</span>
        
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"hello"</span> <span class="na">class=</span><span class="s">"com.donghyeon.blog.dipractice.SayHello"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hello"</span> <span class="na">value=</span><span class="s">"Donghyeon"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>    
<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<p>bean에서 id는 bean들을 구별하기 위한 속성이며 <u>유일</u>해야한다.</p>

<p>class는 주입을 해주고싶은 클래스를 패키지포함해서 적어주면 된다.</p>

<property>태그는 클래스안에 있는 필드들을 말하며,

name속성은 변수의 이름이며, value는 초기화할 값을 적어주면 된다.

자신이 만든 패키지내용과 동일하게 SayHello를 등록해보자.



다시 DIMain 클래스로 가보겠다.

&gt; #### DIMain.java

```java
package com.donghyeon.blog.dipractice;
import org.springframework.beans.factory.xml.XmlBeanDefinitionReader;
import org.springframework.context.support.GenericApplicationContext;
public class DIMain {
    public static void main(String[] args) {
        
        GenericApplicationContext ac =
                new GenericApplicationContext();
        
        XmlBeanDefinitionReader reader =
                new XmlBeanDefinitionReader(ac);
        
        reader.loadBeanDefinitions("com/donghyeon/blog/dipractice/DI-context.xml");
        
        ac.refresh();
                
        SayHello hello = ac.getBean("hello",SayHello.class);
        
        hello.sayHello();
    }
}
```

일단 XML을 가져와서 읽어 오기전에 XML의 내용들을 가져와서 그 <u>내용들을 적을 도화지</u>를 하나 만든다고 생각하면 된다.

[![img](https://1.bp.blogspot.com/-aa_o7JE-zpQ/W95cBARpa3I/AAAAAAAABA8/tVZhf1O015Qir3yY9Yhjemi7P29OqFr4gCLcBGAs/s1600/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2018-11-04%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%2B11.39.47.png)](https://1.bp.blogspot.com/-aa_o7JE-zpQ/W95cBARpa3I/AAAAAAAABA8/tVZhf1O015Qir3yY9Yhjemi7P29OqFr4gCLcBGAs/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2018-11-04%2B%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2B11.39.47.png)

그 다음으로 할건 <u>XML의 값들을 불러</u>와야 될 것이다.

XML의 값을 읽을 수 있게 해주는 클래스가 있는데 XmlBeanDefinitionReader이다.

클래스 이름 앞에 XML이 붙은걸 보아 외부에서 값을 주입해줄 때는 꼭 XML이 아니고 다른 타입의 형식이여도 상관 없다.

그리고 생성자는 BeanDefinitionRegistry 인터페이스를 구현한 클래스면 된다.

여기에서는 위에서 만든 도화지인 GenericApplicationContext는BeanDefinitionRegistry 인터페이스를 구현했다는 사실을 알 수 있다.

이제 선언한 reader로 우리가 xml에서 적어줬던  bean들을 도화지에 옮겨 적을 시간이다.

XmlBeanDefinitionReader안에 있는 reader 메소드를 사용한다.

매개변수 값으로는 xml 파일의 위치를 적어준다.

그 다음에 도화지를 새로고침 해주면 주입이 정상적으로 된 것이다.

확인해보자.

#### Output

[![img](https://1.bp.blogspot.com/-cZ76kW_ScMA/W95cm2C582I/AAAAAAAABBE/B8YLhkwB690pIb7z6lrrdxgXxYNgLy82gCLcBGAs/s1600/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2018-11-04%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%2B11.42.24.png)](https://1.bp.blogspot.com/-cZ76kW_ScMA/W95cm2C582I/AAAAAAAABBE/B8YLhkwB690pIb7z6lrrdxgXxYNgLy82gCLcBGAs/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2018-11-04%2B%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2B11.42.24.png)

 xml에서 Donghyeon으로 값을 적어줬던게 정상적으로 출력된 것을 볼 수 있다.

 이번엔 Hello로 바꿔서 출력해보겠다.

&gt; #### DI-context.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
        
    <bean id="hello" class="com.donghyeon.blog.dipractice.SayHello">
        <property name="hello" value="hello" />
    </bean>    
</beans>
```

DIMain 함수는 변경없이 실행해보자.

#### Output

[![img](https://4.bp.blogspot.com/-ACL9qCOfPJI/W95dO2b-gUI/AAAAAAAABBM/7a14G_-29Q03KG8FjLhXRpDcSUZqA5g6ACLcBGAs/s1600/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2018-11-03%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%2B2.55.09.png)](https://4.bp.blogspot.com/-ACL9qCOfPJI/W95dO2b-gUI/AAAAAAAABBM/7a14G_-29Q03KG8FjLhXRpDcSUZqA5g6ACLcBGAs/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2018-11-03%2B%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2B2.55.09.png)   

## DI를 왜 사용할까?

DI를 사용하는 이유는 이렇게 외부에서 값을 넣어줌으로써 유지보수가 편리하고 한눈에 볼수 있다는 장점이 있다.

예를 들어 interface를 하나 정의한 뒤 그 interface를 구현한 클래스들을 바꾸면서 사용할 수 있다.

&gt; #### Hello 인터페이스

```java
package com.donghyeon.blog.dipractice;
public interface Hello {
    void sayHello();
}
```

Hello 인터페이스를 두어서 클래스간의 관계를 느슨하게 할 수 있다.

우리가 해볼 것은 영어로 인사하기와 한글로 인사하기를 해볼 것이다.

&gt; #### KoreanHello.java

```java
package com.donghyeon.blog.dipractice;
public class KoreanHello implements Hello {
    @Override
    public void sayHello() {
        System.out.println("안녕하세요!!");  
    }
}
```

&gt; #### EnglishHello.java

```java
package com.donghyeon.blog.dipractice;
public class EnglishHello implements Hello{
    @Override
    public void sayHello() {
        System.out.println("Hello World !! ");
        
    }
}
```

&gt; #### DI-context.xml

```java
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
     
    <bean id="hello" class="com.donghyeon.blog.dipractice.KoreanHello">
    </bean>    
</beans>
```

bean의 <u>id는</u> hello, <u>class는</u> com.donghyeon.blog.dipractice.KoreanHello를 적어줬다.

안녕하세요!!가 출력될 것으로 예상된다.

&gt; #### DIMain.java

```java
package com.donghyeon.blog.dipractice;
import org.springframework.beans.factory.xml.XmlBeanDefinitionReader;
import org.springframework.context.support.GenericApplicationContext;
public class DIMain {
    public static void main(String[] args) {
        
        GenericApplicationContext ac =
                new GenericApplicationContext();
        
        XmlBeanDefinitionReader reader =
                new XmlBeanDefinitionReader(ac);
        
        reader.loadBeanDefinitions("com/donghyeon/blog/dipractice/DI-context.xml");
        
        ac.refresh();
        
        // interface
        Hello hello = ac.getBean("hello",Hello.class);
        
        hello.sayHello();
    }
}
```

먼저 Hello 인터페이스 타입인 hello 변수에 xml에 선언해둔 bean의 id가 hello인 bean을 가져와서

Hello 로 리턴해 hello 변수에 넣어준다.

그 다음  hello.sayHello()함수를 호출해본다.

<u>과연 어떤 값이 출력 될까?</u>

#### **Output**

```
안녕하세요!!
```



이제 DI의 장점이 나온다.

만약 영어로 인사하고 싶다면 DI-contextr.xml에 선언된 hello 빈의 클래스를

<u>EnglishHello</u>로 변경해주면 된다.

```java
<bean id="hello" class="com.donghyeon.blog.dipractice.EnglishHello">
 </bean>    
```

**그런다음 DIMain의 소스는 아무것도 건드리지 않고 실행해보자**.

#### Ouput

[![img](https://1.bp.blogspot.com/-OhOhJlPOJqI/W95n0UDDpeI/AAAAAAAABBY/N1W5OGv089AO2B6nOGHjkAkNo5IohgIGwCLcBGAs/s1600/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%2B2018-11-04%2B%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%2B11.07.01.png)](https://1.bp.blogspot.com/-OhOhJlPOJqI/W95n0UDDpeI/AAAAAAAABBY/N1W5OGv089AO2B6nOGHjkAkNo5IohgIGwCLcBGAs/s1600/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%2B2018-11-04%2B%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2B11.07.01.png)

이렇게 중간에 Hello라는 인터페이스를 두면 xml에서 그 인터페이스를 구현한 클래스만 주입해주면 된다.

이렇게 해서 클래스간에 느슨한 관계가 형성이 된다는 장점이 있다.



## DI할때 주의할점.

DI를 해줄때는 <u>DI해줄 객체에 관한 setter 함수</u>가 반드시 정의되어 있어야한다.

```java
String hello;
public void setHello(String hello) {
    this.hello = hello;
}
```

아니면 <u>스프링 프레임워크를 사용하는사람</u>은 @Autowired 어노테이션만 붙이면 자동으로 주입이 된다.

```java
@Autowired
 String hello;
```



## 스프링에서의 DI

&gt; #### web.xml

```xml
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>
```

web.xml에 가보면 \<context-name>으로 contextConfigLocation이 적힌 부분이 있다.

이부분의 value 값을 따라가보면 기본적으로 생성되는 root-context.xml이 선언되어있다.

&gt; #### root-context.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
    <!-- Root Context: defines shared resources visible to all other web components -->
</beans>
```

현재는 빈 설정이 아무것도 안된 빈 xml 파일이지만, 여기에 bean 설정을 해주면

서비스 시작시 자동으로 빈 주입이 된다.

DIMain에서 사용했던 도화지를 만드는 작업인,

```java
GenericApplicationContext ac =
                new GenericApplicationContext();
        
        XmlBeanDefinitionReader reader =
                new XmlBeanDefinitionReader(ac);
        
        reader.loadBeanDefinitions("com/donghyeon/blog/dipractice/DI-context.xml");
        
        ac.refresh();
        
        // interface
        Hello hello = ac.getBean("hello",Hello.class);
```

##### 이런 코드를 생략해도 자동으로 프레임워크가 빈을 주입해줘서 편리한 장점이 있다.
</context-name></property>

  </article>
</div><!-- <div class="share-buttons">
  <h6>Share on: </h6>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/articles/2018-11/Dependecy-Inject-(-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85-)" class="twitter btn" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/articles/2018-11/Dependecy-Inject-(-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85-)" class="facebook btn" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=http://localhost:4000/articles/2018-11/Dependecy-Inject-(-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85-)" class="google-plus btn" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
    <li>
      <a href="https://news.ycombinator.com/submitlink?u=http://localhost:4000/articles/2018-11/Dependecy-Inject-(-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85-)" class="hacker-news btn" title="Share on Hacker News"><i class="fa fa-hacker-news"></i><span> Hacker News</span></a>
    </li>
    <li>
      <a href="https://www.reddit.com/submit?url=http://localhost:4000/articles/2018-11/Dependecy-Inject-(-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85-)" class="reddit btn" title="Share on Reddit"><i class="fa fa-reddit"></i><span> Reddit</span></a>
    </li>
  </ul>
</div><!-- end share-buttons --> 


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'daeakin';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



        <footer>
  &copy; 2019 민동현 <i class="fa fa-heart heart-icon"></i>
</footer>

      </div>
    </div>
  </div>
  <script type="text/javascript" src="http://localhost:4000/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="http://localhost:4000/js/main.js"></script>


</body>
</html>
