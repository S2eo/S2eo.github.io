<!DOCTYPE html>
<html lang="en">





<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="SpringBoot Swagger2Swagger란Swagger란 API 문서를 자동으로 만들어주는 라이브러리 입니다.Swagger 구현  Gradle//springfox-swagger2compile group: 'io.springfox', name: 'springfox-swagge...">
  <meta name="keywords" content="민동현 and spring">
  <meta name="author" content="Swagger | 민동현의 블로그">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#f5f5f5">

  <!-- Twitter Tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Swagger | 민동현의 블로그">
  <meta name="twitter:description" content="SpringBoot Swagger2Swagger란Swagger란 API 문서를 자동으로 만들어주는 라이브러리 입니다.Swagger 구현  Gradle//springfox-swagger2compile group: &#39;io.springfox&#39;, name: &#39;springfox-swagge...">
  
    <meta property="twitter:image" content="http://localhost:4000/img/swagger.png">
  

  <!-- Open Graph Tags -->
  <meta property="og:type" content="blog">
  <meta property="og:url" content="http://localhost:4000/articles/2019-09/Swagger2">
  <meta property="og:title" content="Swagger | 민동현의 블로그">
  <meta property="og:description" content="SpringBoot Swagger2Swagger란Swagger란 API 문서를 자동으로 만들어주는 라이브러리 입니다.Swagger 구현  Gradle//springfox-swagger2compile group: &#39;io.springfox&#39;, name: &#39;springfox-swagge...">
  
    <meta property="og:image" content="http://localhost:4000/img/swagger.png">
  
  <title>Swagger | 민동현의 블로그</title>

  <!-- CSS files -->
  <link rel="stylesheet" href="http://localhost:4000/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://localhost:4000/css/main.css">

  <link rel="canonical" href="http://localhost:4000/articles/2019-09/Swagger2">
  <link rel="alternate" type="application/rss+xml" title="민동현의 블로그" href="http://localhost:4000/feed.xml" />

  <!-- Icons -->
  <!-- 16x16 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
  <!-- 32x32 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.png">
</head>


<body>
  <div class="row">
    <div class="col s12 m3">
      <div class="table cover">
        

<div class="cover-card table-cell table-middle">
  
  <a href="http://localhost:4000/">
    <img src="http://localhost:4000/img/profile.jpg" alt="" class="avatar">
  </a>
  
  <a href="http://localhost:4000/" class="author_name">민동현</a>
  <span class="author_job">Back End Developer</span>
  <span class="author_bio mbm">JAVA 개발자</span>
  <nav class="nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a href="http://localhost:4000/">home</a>
      </li>
       
      <li class="nav-item">
        <a href="http://localhost:4000/archive/">Archive</a>
      </li>
          
      <li class="nav-item">
        <a href="http://localhost:4000/categories/">Categories</a>
      </li>
             
    </ul>
  </nav>
  <script type="text/javascript">
  // based on http://stackoverflow.com/a/10300743/280842
  function gen_mail_to_link(hs, subject) {
    var lhs,rhs;
    var p = hs.split('@');
    lhs = p[0];
    rhs = p[1];
    document.write("<a class=\"social-link-item\" target=\"_blank\" href=\"mailto");
    document.write(":" + lhs + "@");
    document.write(rhs + "?subject=" + subject + "\"><i class=\"fa fa-fw fa-envelope\"></i><\/a>");
  }
</script>
<div class="social-links">
  <ul>
    
      <li>
      <script>gen_mail_to_link('mindh890@gmail.com', 'Hello from website');</script>
      </li>
    
    
    
    
    <li><a href="http://linkedin.com/in/동현-민-736913183" class="social-link-item" target="_blank"><i class="fa fa-fw fa-linkedin"></i></a></li>
    
    
    
    
    <li><a href="http://github.com/DaeAkin" class="social-link-item" target="_blank"><i class="fa fa-fw fa-github"></i></a></li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <li><a href="https://t.me/DonghyeonMin" class="social-link-item" target="_blank"><i class="fa fa-fw fa-telegram"></i></a></li>
  </ul>
</div>

</div>

      </div>
    </div>
    <div class="col s12 m9">
      <div class="post-listing">
        <a class="btn" href= "http://localhost:4000/" >
  Home
</a>

<div class="post-image-feature">
  <img class="feature-image" src=
  
  "http://localhost:4000/img/swagger.png"
  
  alt="Swagger feature image">

  
</div><!-- /.image-wrap -->



<div id="post">
  <header class="post-header">
    <h1 title="Swagger">Swagger</h1>
    <span class="post-meta">
      <span class="post-date">
        12 SEP 2019
      </span>
      •
      <span class="read-time" title="Estimated read time">
  
  
    8 mins read
  
</span>

    </span>

  </header>

  <article class="post-content">
    <h1 id="springboot-swagger2">SpringBoot Swagger2</h1>

<h2 id="swagger란">Swagger란</h2>

<p>Swagger란 API 문서를 자동으로 만들어주는 라이브러리 입니다.</p>

<h2 id="swagger-구현">Swagger 구현</h2>

<blockquote>
  <h4 id="gradle">Gradle</h4>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//springfox-swagger2</span>
<span class="n">compile</span> <span class="nl">group:</span> <span class="s1">'io.springfox'</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">'springfox-swagger2'</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">'2.9.2'</span>
<span class="c1">//springfox-swagger-ui</span>
<span class="n">compile</span> <span class="nl">group:</span> <span class="s1">'io.springfox'</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">'spxringfox-swagger-ui'</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">'2.9.2'</span>
</code></pre></div></div>

<blockquote>
  <h4 id="maven">Maven</h4>
</blockquote>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>springfox-swagger2<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>2.9.2<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>springfox-swagger-ui<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>2.9.2<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<blockquote>
  <h4 id="swaggerconfigjava">SwaggerConfig.java</h4>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="nd">@EnableSwagger2</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SwaggerConfig</span> <span class="o">{</span>
  
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">Docket</span> <span class="nf">api</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Docket</span><span class="o">(</span><span class="nc">DocumentationType</span><span class="o">.</span><span class="na">SWAGGER_2</span><span class="o">)</span>
                <span class="o">.</span><span class="na">groupName</span><span class="o">(</span><span class="s">"worker_api_v1"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">select</span><span class="o">()</span>
                <span class="o">.</span><span class="na">apis</span><span class="o">(</span><span class="nc">RequestHandlerSelectors</span><span class="o">.</span><span class="na">any</span><span class="o">())</span> <span class="c1">// 모든요청</span>
                <span class="o">.</span><span class="na">paths</span><span class="o">(</span><span class="nc">PathSelectors</span><span class="o">.</span><span class="na">any</span><span class="o">())</span> <span class="c1">//모든경로</span>
                <span class="o">.</span><span class="na">build</span><span class="o">().</span><span class="na">apiInfo</span><span class="o">(</span><span class="n">apiInfo</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">ApiInfo</span> <span class="nf">apiInfo</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ApiInfoBuilder</span><span class="o">().</span><span class="na">title</span><span class="o">(</span><span class="s">"스웨거 Api"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"스웨거 튜토리얼! API!."</span><span class="o">)</span>
                <span class="o">.</span><span class="na">contact</span><span class="o">(</span><span class="k">new</span> <span class="nc">Contact</span><span class="o">(</span><span class="s">"민동현"</span><span class="o">,</span> <span class="s">"https://daeakin.github.io/"</span><span class="o">,</span> <span class="s">"mindh890@gmail.com"</span><span class="o">))</span>
                <span class="o">.</span><span class="na">version</span><span class="o">(</span><span class="s">"1.0.0"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<p><br /></p>

<p><br /></p>

<h2 id="웹에서-스웨거-접속하기">웹에서 스웨거 접속하기.</h2>

<blockquote>
  <h4 id="httplocalhostportswagger-uihtml">http://localhost:{port}/swagger-ui.html</h4>
</blockquote>

<p><img src="https://github.com/DaeAkin/DaeAkin.github.io/blob/master/img/blog/swagger/image1.png?raw=true" alt="" /></p>

<p>기본적으로 SpringBoot에 의해 만들어지는 컨트롤러들만 현재 노출되어있습니다.</p>

<hr />

<h2 id="apiinfo-함수에-관한-내용들">apiInfo() 함수에 관한 내용들</h2>

<p><img src="https://github.com/DaeAkin/DaeAkin.github.io/blob/master/img/blog/swagger/image2.png?raw=true" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">ApiInfo</span> <span class="nf">apiInfo</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ApiInfoBuilder</span><span class="o">().</span><span class="na">title</span><span class="o">(</span><span class="s">"스웨거 Api"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"스웨거 튜토리얼! API!."</span><span class="o">)</span>
            <span class="o">.</span><span class="na">contact</span><span class="o">(</span><span class="k">new</span> <span class="nc">Contact</span><span class="o">(</span><span class="s">"민동현"</span><span class="o">,</span> <span class="s">"https://daeakin.github.io/"</span><span class="o">,</span> <span class="s">"mindh890@gmail.com"</span><span class="o">))</span>
            <span class="o">.</span><span class="na">version</span><span class="o">(</span><span class="s">"1.0.0"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<p><br /></p>

<p><br /></p>

<h2 id="문서-작성용-컨트롤러-만들기">문서 작성용 컨트롤러 만들기.</h2>

<blockquote>
  <h4 id="테스트용-restcontroller-만들기">테스트용 RestController 만들기</h4>
</blockquote>

<p><img src="https://github.com/DaeAkin/DaeAkin.github.io/blob/master/img/blog/swagger/image3.png?raw=true" alt="" /></p>

<p>2개의 클래스를 더 만들어 보겠습니다.</p>

<blockquote>
  <h4 id="testcontrollerjava">TestController.java</h4>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestController</span> <span class="o">{</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/test"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">TestDto</span> <span class="nf">testGetMethod</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">TestDto</span> <span class="n">testDto</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">TestDto</span><span class="o">(</span><span class="s">"Test!!"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <h4 id="testdtojava">TestDto.java</h4>

  <p>‼️ Swagger 문서화를 위해서는 Getter 메소드가 필요합니다.</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestDto</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">message</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">TestDto</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">flag</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">flag</span> <span class="o">=</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getMessage</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isFlag</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <h4 id="test-controller-추가-및-test-경로-추가된-모습">test-controller 추가 및 /test 경로 추가된 모습</h4>
</blockquote>

<p><img src="https://github.com/DaeAkin/DaeAkin.github.io/blob/master/img/blog/swagger/image4.png?raw=true" alt="" /></p>

<p>이렇게 매핑해준 경로가 스웨거에 추가 됩니다.</p>

<p>필요한 파라미터가 어떤건지도 알려줍니다.</p>

<p>하지만 이 파라미터가 왜 필요하고 어떤 동작을 위해 필요한지는 필드명만 보고는 어려울 수 있습니다.</p>

<p></p>

<h2 id="1-필드에-설명-붙여주기-apimodel-apimodelproperty">1. 필드에 설명 붙여주기. @ApiModel @ApiModelProperty</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ApiModel</span><span class="o">(</span><span class="n">description</span> <span class="o">=</span> <span class="s">"이 모델은 Test하기 위한 Dto 입니다."</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestDto</span> <span class="o">{</span>
    <span class="nd">@ApiModelProperty</span><span class="o">(</span><span class="n">notes</span> <span class="o">=</span> <span class="s">"원하는 message 내용을 넣으세요."</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">message</span><span class="o">;</span>
    <span class="nd">@ApiModelProperty</span><span class="o">(</span><span class="n">notes</span> <span class="o">=</span> <span class="s">"원하는 boolean 값을 넣으세요."</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">TestDto</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">flag</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">flag</span> <span class="o">=</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getMessage</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isFlag</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p><img src="https://github.com/DaeAkin/DaeAkin.github.io/blob/master/img/blog/swagger/image5.png?raw=true" alt="" /></p>

<p>Model 버튼을 눌러주면 이렇게 나옵니다.</p>

<h2 id="2-컨트롤러가-무슨동작을-하는지-알려주기-api">2. 컨트롤러가 무슨동작을 하는지 알려주기 @Api</h2>

<p><img src="https://github.com/DaeAkin/DaeAkin.github.io/blob/master/img/blog/swagger/image6.png?raw=true" alt="" /></p>

<p>기본적으로 컨트롤러의 설명은 컨트롤러의 클래스이름을 따라갑니다.</p>

<p>이 클래스가 무슨 용도를 위한 클래스인지 설명을 수정해줄 수 있습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@Api</span><span class="o">(</span><span class="n">description</span> <span class="o">=</span> <span class="s">"테스트 하기위한 TestController 예요!"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestController</span> <span class="o">{</span>
</code></pre></div></div>

<p><img src="https://github.com/DaeAkin/DaeAkin.github.io/blob/master/img/blog/swagger/image7.png?raw=true" alt="" /></p>

<h2 id="3-api-어떤-동작을-하는지-알려주기-apioperation">3. API 어떤 동작을 하는지 알려주기. @ApiOperation</h2>

<p><img src="https://github.com/DaeAkin/DaeAkin.github.io/blob/master/img/blog/swagger/image8.png?raw=true" alt="" /></p>

<p>기본적으로 API 설명은 메소드이름으로 적혀있습니다.</p>

<p>이것 또한 개발자가 수정해줄 수 있습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ApiOperation</span><span class="o">(</span><span class="s">"테스트를 하기위한 Api이예요!"</span><span class="o">)</span>
<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/test"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">TestDto</span> <span class="nf">testGetMethod</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">TestDto</span> <span class="n">testDto</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nf">TestDto</span><span class="o">(</span><span class="s">"Test!!"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><img src="https://github.com/DaeAkin/DaeAkin.github.io/blob/master/img/blog/swagger/image9.png?raw=true" alt="" /></p>

<h2 id="4-api-호출이-헤더가-필요할-때-apiimplicitparamsapiimplicitparam">4. API 호출이 헤더가 필요할 때 @ApiImplicitParams,@ApiImplicitParam</h2>

<p>Oauth2를 사용하신다면 Header에 Token을 넘겨야 합니다.</p>

<p>Swagger 문서에 Header를 명시해주기 위해서는 다음과 같이 사용하시면 됩니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ApiImplicitParams</span><span class="o">({</span>
        <span class="nd">@ApiImplicitParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Authorization"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"authorization header"</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span>
                <span class="n">dataType</span> <span class="o">=</span> <span class="s">"string"</span><span class="o">,</span> <span class="n">paramType</span> <span class="o">=</span> <span class="s">"header"</span><span class="o">,</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="s">"bearer cbbb1a6e-8614-4a4d-a967-b0a42924e7ca"</span><span class="o">)</span>
<span class="o">})</span>
<span class="nd">@ApiOperation</span><span class="o">(</span><span class="s">"테스트를 하기위한 Api이예요!"</span><span class="o">)</span>
<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/test"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">TestDto</span> <span class="nf">testGetMethod</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">TestDto</span> <span class="n">testDto</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nf">TestDto</span><span class="o">(</span><span class="s">"Test!!"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="5-파라미터에대해-설명해주기-apiparam">5. 파라미터에대해 설명해주기 @ApiParam</h2>

<p>API가 필요로하는 파라미터에 대해 설명을 해줄 수 있습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/test"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">TestDto</span> <span class="nf">testGetMethod</span><span class="o">(</span><span class="nd">@ApiParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"Test대한 정보"</span><span class="o">,</span><span class="n">required</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span><span class="nd">@RequestBody</span> <span class="nc">TestDto</span> <span class="n">testDto</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nf">TestDto</span><span class="o">(</span><span class="s">"Test!!"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="6-파라미터가--swagger에-안보이게-하기">6. 파라미터가  Swagger에 안보이게 하기</h2>

<p>파라미터가 여러개 있을 때 원하지 않는 파라미터를 Swagger에서 안보이게 할 수 있습니다.</p>

<p>저는 Oauth2가 받는 파라미터가 보이지 않게 해주고 싶을 때 이용 했습니다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/test"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">TestDto</span> <span class="nf">testGetMethod</span><span class="o">(</span><span class="nd">@ApiIgnore</span> <span class="nc">Authentication</span> <span class="n">authentication</span><span class="o">,</span><span class="nd">@RequestBody</span> <span class="nc">TestDto</span> <span class="n">testDto</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">TestDto</span><span class="o">(</span><span class="s">"Test!!"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="7-advanced-swagger-config">7. Advanced Swagger Config</h2>

<h3 id="7-1-패키지-기반-문서화-basepackage">7-1. 패키지 기반 문서화 basePackage</h3>

<p>현재 Swagger는 Spring이 자동으로 만들어지는 Controller도 문서에 나타나게 됩니다.</p>

<p>이 Controller를 제외하는 방법을 해보겠습니다.</p>

<blockquote>
  <h4 id="swaggerconfigjava-1">SwaggerConfig.java</h4>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">Docket</span> <span class="nf">api</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Docket</span><span class="o">(</span><span class="nc">DocumentationType</span><span class="o">.</span><span class="na">SWAGGER_2</span><span class="o">)</span>
            <span class="o">.</span><span class="na">groupName</span><span class="o">(</span><span class="s">"swagger-tutorial_api_v1"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">select</span><span class="o">()</span>          								<span class="o">.</span><span class="na">apis</span><span class="o">(</span><span class="nc">RequestHandlerSelectors</span><span class="o">.</span><span class="na">basePackage</span><span class="o">(</span><span class="s">"com.donghyeon.swaggertutorial.controller"</span><span class="o">))</span>
            <span class="o">.</span><span class="na">paths</span><span class="o">(</span><span class="nc">PathSelectors</span><span class="o">.</span><span class="na">any</span><span class="o">())</span>
            <span class="o">.</span><span class="na">build</span><span class="o">().</span><span class="na">apiInfo</span><span class="o">(</span><span class="n">apiInfo</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<p>지정해준 패키지안에 있는 컨트롤러만 문서화하는 설정입니다.</p>

<p><img src="https://github.com/DaeAkin/DaeAkin.github.io/blob/master/img/blog/swagger/image10.png?raw=true" alt="" /></p>

<hr />

<h3 id="7-2-api로-시작하는-api만-문서화하기-ant">7-2. /api로 시작하는 API만 문서화하기 ant()</h3>

<p>RestAPI들은 보통 /api로 시작하는게 보편적입니다.</p>

<p>/api로 시작하는 API들만 문서화 하는 방법을 알아보겠습니다.</p>

<blockquote>
  <h4 id="swaggerconfigjava-2">SwaggerConfig.java</h4>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">Docket</span> <span class="nf">api</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Docket</span><span class="o">(</span><span class="nc">DocumentationType</span><span class="o">.</span><span class="na">SWAGGER_2</span><span class="o">)</span>
            <span class="o">.</span><span class="na">groupName</span><span class="o">(</span><span class="s">"swagger-tutorial_api_v1"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">select</span><span class="o">()</span>           <span class="o">.</span><span class="na">apis</span><span class="o">(</span><span class="nc">RequestHandlerSelectors</span><span class="o">.</span><span class="na">basePackage</span><span class="o">(</span><span class="s">"com.donghyeon.swaggertutorial.controller"</span><span class="o">))</span>
            <span class="o">.</span><span class="na">paths</span><span class="o">(</span><span class="nc">PathSelectors</span><span class="o">.</span><span class="na">ant</span><span class="o">(</span><span class="s">"/api/**"</span><span class="o">))</span>
            <span class="o">.</span><span class="na">build</span><span class="o">().</span><span class="na">apiInfo</span><span class="o">(</span><span class="n">apiInfo</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<p>이제 맵핑이 /api 로시작하는것만 문서화가 됩니다,</p>

<h2 id="trouble-shooting">Trouble Shooting</h2>

<p>Swagger에 접속했는데 다음과 오류가 나타날 수 있습니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java.lang.NumberFormatException: For input string: ""
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) ~[na:1.8.0_191]
	at java.lang.Long.parseLong(Long.java:601) ~[na:1.8.0_191]
	at java.lang.Long.valueOf(Long.java:803) ~[na:1.8.0_191]
	at io.swagger.models.parameters.AbstractSerializableParameter.getExample(AbstractSerializableParameter.java:412) ~[swagger-models-1.5.20.jar:1.5.20]
	at sun.reflect.GeneratedMethodAccessor149.invoke(Unknown Source) ~[na:na]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_191]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_191]
	at
	....
</code></pre></div></div>

<p>이 문제는 springfox-swagger2 라이브러리 안에 있는 swagger-annotations과  swagger-models의</p>

<p>버전충돌 문제로 보입니다.</p>

<p>이 두개의 라이브러리만 구 버전인 1.5.21을 사용하시면 해결됩니다.</p>

<h3 id="해결방법">해결방법</h3>

<blockquote>
  <h4 id="gradle-1">Gradle</h4>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//springfox-swagger2</span>
<span class="n">compile</span><span class="o">(</span><span class="nl">group:</span> <span class="s1">'io.springfox'</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">'springfox-swagger2'</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">'2.9.2'</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">exclude</span> <span class="nl">group:</span> <span class="s1">'io.swagger'</span> <span class="o">,</span><span class="n">module</span> <span class="o">:</span> <span class="s1">'swagger-annotations'</span>
    <span class="n">exclude</span> <span class="nl">group:</span> <span class="s1">'io.swagger'</span> <span class="o">,</span><span class="n">module</span> <span class="o">:</span> <span class="s1">'swagger-models'</span>
<span class="o">}</span>

<span class="c1">//springfox-swagger-ui</span>
<span class="n">compile</span> <span class="nl">group:</span> <span class="s1">'io.springfox'</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">'springfox-swagger-ui'</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">'2.9.2'</span>
<span class="c1">// swagger-annotations 1.5.21 / swagger-models 1.5.21</span>
<span class="n">compile</span> <span class="nl">group:</span> <span class="s1">'io.swagger'</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">'swagger-annotations'</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">'1.5.21'</span>
<span class="n">compile</span> <span class="nl">group:</span> <span class="s1">'io.swagger'</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">'swagger-models'</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">'1.5.21'</span>
</code></pre></div></div>

<blockquote>
  <h4 id="maven-1">Maven</h4>
</blockquote>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>springfox-swagger2<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>2.9.2<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;exclusions&gt;</span>
		<span class="nt">&lt;exclusion&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>io.swagger<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>swagger-annotations<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;/exclusion&gt;</span>
		<span class="nt">&lt;exclusion&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>io.swagger<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>swagger-models<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;/exclusion&gt;</span>
	<span class="nt">&lt;/exclusions&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>springfox-swagger-ui<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>2.9.2<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>io.swagger<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>swagger-annotations<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>1.5.21<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>io.swagger<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>swagger-models<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>1.5.21<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<h2 id="참고자료">참고자료</h2>

<p><a href="https://github.com/DaeAkin/swagger-tutorial">github 소스보러가기</a></p>

<p><a href="https://github.com/springfox/springfox/issues/2265">오류해결 레퍼런스</a></p>

<p><a href="https://github.com/springfox/springfox/issues/2352">value 커스터마이징</a></p>

<p><a href="http://springfox.github.io/springfox/docs/current/">Swagger 공식사이트</a></p>

<p><a href="http://docs.swagger.io/swagger-core/v1.5.X/apidocs/index.html?io/swagger/annotations/ApiResponses.html">Swagger Docs</a></p>


  </article>
</div><!-- <div class="share-buttons">
  <h6>Share on: </h6>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/articles/2019-09/Swagger2" class="twitter btn" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/articles/2019-09/Swagger2" class="facebook btn" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=http://localhost:4000/articles/2019-09/Swagger2" class="google-plus btn" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
    <li>
      <a href="https://news.ycombinator.com/submitlink?u=http://localhost:4000/articles/2019-09/Swagger2" class="hacker-news btn" title="Share on Hacker News"><i class="fa fa-hacker-news"></i><span> Hacker News</span></a>
    </li>
    <li>
      <a href="https://www.reddit.com/submit?url=http://localhost:4000/articles/2019-09/Swagger2" class="reddit btn" title="Share on Reddit"><i class="fa fa-reddit"></i><span> Reddit</span></a>
    </li>
  </ul>
</div><!-- end share-buttons --> 


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'daeakin';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



        <footer>
  &copy; 2019 민동현 <i class="fa fa-heart heart-icon"></i>
</footer>

      </div>
    </div>
  </div>
  <script type="text/javascript" src="http://localhost:4000/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="http://localhost:4000/js/main.js"></script>


</body>
</html>
